<div class="setup-container">
  <!-- Paso 1: Selecci贸n de m茅todo -->
  <div *ngIf="paso === 1" class="setup-card">
    <h2>Configura tu autenticaci贸n de dos factores</h2>
    <p class="subtitle">Elige c贸mo deseas proteger tu cuenta</p>

    <div class="methods-grid">
      <div class="method-card" (click)="seleccionarMetodo('TOTP')">
        <div class="icon"></div>
        <h3>Aplicaci贸n Autenticadora</h3>
        <p>Google Authenticator, Authy, etc.</p>
        <span class="badge recommended">Recomendado</span>
      </div>

      <!-- CAMBIO 1: Quit茅 "disabled" y cambi茅 badge -->
      <div class="method-card" (click)="seleccionarMetodo('EMAIL')">
        <div class="icon"></div>
        <h3>Correo Electr贸nico</h3>
        <p>C贸digo enviado a tu email</p>
        <span class="badge available">Disponible</span>
      </div>

      <div class="method-card disabled" (click)="seleccionarMetodo('SMS')">
        <div class="icon"></div>
        <h3>SMS</h3>
        <p>C贸digo por mensaje de texto</p>
        <span class="badge soon">Pr贸ximamente</span>
      </div>

      <div class="method-card skip" (click)="seleccionarMetodo('NINGUNO')">
        <div class="icon">锔</div>
        <h3>Omitir por ahora</h3>
        <p>Puedes configurarlo despu茅s</p>
      </div>
    </div>
  </div>

  <div *ngIf="paso === 2 && metodoSeleccionado === 'TOTP'" class="setup-card">
    <h2>Escanea el c贸digo QR</h2>
    <p class="subtitle">Usa Google Authenticator o cualquier app compatible</p>

    <div class="qr-section">
      <img [src]="qrCodeUrl" alt="QR Code" class="qr-code" />
      
      <div class="manual-code">
        <p><strong>驴No puedes escanear?</strong></p>
        <p>Ingresa este c贸digo manualmente:</p>
        <code class="secret-code">{{ secreto }}</code>
      </div>
    </div>

    <button (click)="irAVerificacion()" class="btn btn-primary">
      Ya escane茅 el c贸digo
    </button>
  </div>

  <!-- Paso 3: Verificar c贸digo -->
  <div *ngIf="paso === 3" class="setup-card">
    <h2>Verifica tu c贸digo</h2>
    <!-- CAMBIO 3: Subt铆tulo din谩mico seg煤n m茅todo -->
    <p class="subtitle" *ngIf="metodoSeleccionado === 'TOTP'">
      Ingresa el c贸digo de 6 d铆gitos de tu app
    </p>
    <p class="subtitle" *ngIf="metodoSeleccionado === 'EMAIL'">
      Revisa tu correo <strong>{{ correo }}</strong> e ingresa el c贸digo
    </p>

    <div class="verification-section">
      <input 
        type="text" 
        class="code-input"
        [(ngModel)]="codigoVerificacion"
        placeholder="000000"
        maxlength="6"
        pattern="[0-9]*"
      />

      <button (click)="verificarCodigo()" class="btn btn-primary">
        Verificar y Activar
      </button>

      <p *ngIf="mensaje" [ngClass]="{'error': isError, 'success': !isError}">
        {{ mensaje }}
      </p>
    </div>
  </div>

  <button *ngIf="paso === 1" (click)="omitir2FA()" class="btn-skip">
    Omitir configuraci贸n
  </button>
</div>