<div class="setup-container">
  <div class="setup-card">
    <!-- PASO 1: Informaci√≥n -->
    <div *ngIf="paso === 1">
      <h2>üìß Configurar Email 2FA</h2>
      <p class="subtitle">
        Configura la autenticaci√≥n de dos factores por correo electr√≥nico.
        Te enviaremos un c√≥digo cada vez que inicies sesi√≥n.
      </p>

      <div class="info-box">
        <p><strong>Tu correo:</strong> {{ correo }}</p>
        <p>Recibir√°s c√≥digos de verificaci√≥n en este correo.</p>
      </div>

      <button 
        (click)="enviarCodigoConfiguracion()" 
        class="btn-primary"
        [disabled]="cargando"
      >
        <span *ngIf="!cargando">Enviar c√≥digo de prueba</span>
        <span *ngIf="cargando">Enviando...</span>
      </button>

      <button (click)="volver()" class="btn-secondary">
        ‚Üê Cancelar
      </button>
    </div>

    <!-- PASO 2: Verificar c√≥digo -->
    <div *ngIf="paso === 2">
      <h2>üìß Verificar C√≥digo</h2>
      <p class="subtitle">
        Revisa tu correo <strong>{{ correo }}</strong> e ingresa el c√≥digo que recibiste.
      </p>

      <div class="input-section">
        <label for="codigo">C√≥digo de verificaci√≥n</label>
        <input 
          id="codigo"
          type="text"
          [(ngModel)]="codigo"
          placeholder="XXXX-XXXX"
          maxlength="9"
          class="input-code"
          [disabled]="cargando"
          (keyup.enter)="verificarYActivar()"
          autofocus
        />
      </div>

      <div class="message" [class.error]="isError" [class.success]="!isError" *ngIf="mensaje">
        {{ mensaje }}
      </div>

      <button 
        (click)="verificarYActivar()" 
        class="btn-primary"
        [disabled]="cargando || !codigo"
      >
        <span *ngIf="!cargando">Verificar y Activar</span>
        <span *ngIf="cargando">Verificando...</span>
      </button>

      <button (click)="volver()" class="btn-secondary" [disabled]="cargando">
        ‚Üê Cancelar
      </button>
    </div>
  </div>
</div>